<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>painter</title>
    <script src="https://kit.fontawesome.com/1f7837984b.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300&display=swap" rel="stylesheet">
    <style>
        div {
        font-size: 8px;
        font-family: 'Fredoka', sans-serif;
        }
        .outside-wrapper{
            width: 1500px;
            margin: auto;
            border: 1px solid rgb(165, 157, 157);
        }
       .main-menu {
           height:100px;
           background-color: beige;
           display: flex;
       }
       .main-menu .selectColor {
        display: flex;
       }
       .main-menu .selectColor .colorsWrapper{
           width: 120px;
           height: 100%;
           display: flex;
           flex-wrap: wrap;
       }
       .main-menu .selectColor .colorsWrapper span {
        display: block;
        height: 30px;
        width:30px;
        border-radius: 30px;
    }
    .main-menu .selectColor .selectButton{
        xbackground-color: rgb(110, 77, 77);
        display: flex;
        width: 250px;
        justify-content: space-between;
    }
    .main-menu .selectColor .selectButton [class$=Color] {
        height: 100%;
        width: 100px;
    }
    .main-menu .selectColor .selectButton [class$=Color] .square{
        height: 80px;
        width: 80px;
        margin: auto;
        
        
    }
    .text{
        font-size: 20px;
        text-align: center;
    }
    
    .main-menu .drawShapes{
        width: 300px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .main-menu .drawShapes div {
        height: 80px;
        width: 80px;
        xbackground-color: #a14343;
    }
    
    svg#paint-board {
            display: block;
        }
    svg#svg-icon {
        width: 100%;
        height: 100%;
        
    }   
    svg#bucket {
        width: 80px;
        height: 80px;
    } 
    svg.shape {
        width: 80px;
        height: 80px;
    }
    </style>
</head>

<body>
    
    <div class="outside-wrapper">
    <div class="main-menu">
       <div class="selectColor">
           <div class="colorsWrapper">
            <span style="background-color: darkturquoise;"></span>
            <span style="background-color: Crimson;"></span>
            <span style="background-color: DarkOrange;"></span>
            <span style="background-color: DarkSalmon;"></span>
            <span style="background-color: DarkSeaGreen;"></span>
            <span style="background-color: FireBrick;"></span>
            <span style="background-color: LightSkyBlue;"></span>
            <span style="background-color: MediumSeaGreen;"></span>
           </div>
           <input type="color" id="colorSelector">
           <div class="selectButton">
            <div class="foregroudColor">
                <div class="square" >
                    <svg id= 'svg-icon' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
               <circle style="fill:rgb(81, 142, 212);" cx="256" cy="256" r="256"/>
               <path style="fill:rgb(81, 142, 212);" d="M306.045,507.095c96.434-19.113,173.378-92.375,197.806-186.785L309.544,126.005L182.718,242.483
                   l25.941,46.559l-50.424,70.246L306.045,507.095z"/>
               <path style="fill:#FFFFFF;" d="M361.794,227.102c-3.17,0.465-6.456,0.581-9.814,0.307c-20.575-1.676-37.245-18.322-38.943-38.896
                   c-0.681-8.247,0.986-16.053,4.406-22.823c8.868-17.558,0.814-39.081-17.91-45.109c-15.089-4.858-31.28-7.261-48.107-6.732
                   c-76.674,2.412-138.138,66.372-137.647,143.082c0.505,78.615,64.793,142.095,143.715,141.283
                   c75.524-0.776,137.871-61.478,140.631-136.954c0.019-0.503,0.034-1.005,0.047-1.505C398.688,240.04,381.307,224.239,361.794,227.102
                   z M268.067,274.101c-15.71,0-28.444-12.734-28.444-28.444s12.734-28.444,28.444-28.444s28.444,12.734,28.444,28.444
                   S283.776,274.101,268.067,274.101z"/>
               <path style="fill:#D0D1D3;" d="M361.794,227.102c-3.17,0.465-6.456,0.581-9.814,0.307c-20.575-1.676-37.245-18.322-38.943-38.896
                   c-0.681-8.247,0.986-16.053,4.406-22.823c8.868-17.558,0.814-39.081-17.91-45.109c-13.715-4.417-28.348-6.777-43.536-6.777v106.122
                   c3.667-1.724,7.747-2.715,12.067-2.715c15.71,0,28.444,12.734,28.444,28.444c0,15.71-12.734,28.444-28.444,28.444
                   c-4.32,0-8.399-0.991-12.067-2.715v126.805c0.5,0,0.993,0.028,1.495,0.022c75.524-0.776,137.871-61.478,140.631-136.954
                   c0.019-0.503,0.034-1.005,0.047-1.505C398.688,240.04,381.307,224.239,361.794,227.102z"/>
               <circle style="fill:#FF7F4F;" cx="243.778" cy="173.528" r="20.704"/>
               <circle style="fill:#EAA22F;" cx="178.941" cy="207.748" r="20.704"/>
               <circle style="fill:#8BC180;" cx="167.236" cy="282.479" r="20.704"/>
               <circle style="fill:#71E2EF;" cx="208.662" cy="341.919" r="20.704"/>
               <circle style="fill:#02B2B2;" cx="286.099" cy="341.919" r="20.704"/>
               <circle style="fill:#59595B;" cx="333.576" cy="282.479" r="20.704"/>
               </svg></div>
                <div class="text" ">color1</div>
            </div>
            <!-- backgroudColor is the fill color -->
            <div class="backgroudColor">
                <div class="square">
                    <svg id= 'svg-icon' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
               <circle style="fill:rgb(118, 163, 112);" cx="256" cy="256" r="256"/>
               <path style="fill:rgb(118, 163, 112);" d="M306.045,507.095c96.434-19.113,173.378-92.375,197.806-186.785L309.544,126.005L182.718,242.483
                   l25.941,46.559l-50.424,70.246L306.045,507.095z"/>
               <path style="fill:#FFFFFF;" d="M361.794,227.102c-3.17,0.465-6.456,0.581-9.814,0.307c-20.575-1.676-37.245-18.322-38.943-38.896
                   c-0.681-8.247,0.986-16.053,4.406-22.823c8.868-17.558,0.814-39.081-17.91-45.109c-15.089-4.858-31.28-7.261-48.107-6.732
                   c-76.674,2.412-138.138,66.372-137.647,143.082c0.505,78.615,64.793,142.095,143.715,141.283
                   c75.524-0.776,137.871-61.478,140.631-136.954c0.019-0.503,0.034-1.005,0.047-1.505C398.688,240.04,381.307,224.239,361.794,227.102
                   z M268.067,274.101c-15.71,0-28.444-12.734-28.444-28.444s12.734-28.444,28.444-28.444s28.444,12.734,28.444,28.444
                   S283.776,274.101,268.067,274.101z"/>
               <path style="fill:#D0D1D3;" d="M361.794,227.102c-3.17,0.465-6.456,0.581-9.814,0.307c-20.575-1.676-37.245-18.322-38.943-38.896
                   c-0.681-8.247,0.986-16.053,4.406-22.823c8.868-17.558,0.814-39.081-17.91-45.109c-13.715-4.417-28.348-6.777-43.536-6.777v106.122
                   c3.667-1.724,7.747-2.715,12.067-2.715c15.71,0,28.444,12.734,28.444,28.444c0,15.71-12.734,28.444-28.444,28.444
                   c-4.32,0-8.399-0.991-12.067-2.715v126.805c0.5,0,0.993,0.028,1.495,0.022c75.524-0.776,137.871-61.478,140.631-136.954
                   c0.019-0.503,0.034-1.005,0.047-1.505C398.688,240.04,381.307,224.239,361.794,227.102z"/>
               <circle style="fill:#FF7F4F;" cx="243.778" cy="173.528" r="20.704"/>
               <circle style="fill:#EAA22F;" cx="178.941" cy="207.748" r="20.704"/>
               <circle style="fill:#8BC180;" cx="167.236" cy="282.479" r="20.704"/>
               <circle style="fill:#71E2EF;" cx="208.662" cy="341.919" r="20.704"/>
               <circle style="fill:#02B2B2;" cx="286.099" cy="341.919" r="20.704"/>
               <circle style="fill:#59595B;" cx="333.576" cy="282.479" r="20.704"/>
               </svg></div>
                <div class="text">color2</div>
            </div>
           </div>

       </div>
       <div class="drawShapes">
           <div class="line">
            <svg class="shape line" width="80px" height="80px" viewBox="0 0 76 76" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full" enable-background="new 0 0 76.00 76.00" xml:space="preserve">
                <path d="M 10 70 C 20 70 60 60 70 10" stroke="black" stroke-width="5" fill="none" />
            </svg>
           </div>
           <div class="rectangle"><svg class="shape rect" width="512px" height="512px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
            <path  d="M 50 100 h 400 v 300 h -400 v -320" fill='none' stroke="black" stroke-width="40"/>
          </svg></div>
           <div class="circle">
            <svg class="shape circle" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            width="100px" height="100px" style="enable-background:new 0 0 31.424 31.425;"
            xml:space="preserve">
       
            <circle cx="40" cy="40" r="30" fill = "none" stroke="black" stroke-width="10"/>
       
       
       </svg>
       
           </div>
       </div>
       <div class="fillBucket">
        <svg version="1.1" id="bucket" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 473.931 473.931" style="enable-background:new 0 0 473.931 473.931;" xml:space="preserve">
   <circle  cx="236.966" cy="236.966" r="236.966"/>
   <g>
       <path style="fill:#F5D8A4;" d="M330.764,359.534c0,9.403-7.622,17.036-17.029,17.036H152.885c-9.407,0-17.033-7.633-17.033-17.036
           l-22.234-202.699c0-9.407,239.387-9.407,239.387,0L330.764,359.534z"/>
       <path style="fill:#F5D8A4;" d="M123.572,163.545c0,0,3.113-95.493,109.66-95.493c106.55,0,109.821,95.493,109.821,95.493
           l9.953-6.709c0,0,4.09-107.07-119.781-107.07c-123.867,0-119.605,107.07-119.605,107.07L123.572,163.545z"/>
   </g>
   <g>
       <path style="fill:#E9CA92;" d="M233.224,68.051V49.765c-123.867,0-119.605,107.07-119.605,107.07l22.234,202.699
           c0,9.403,7.626,17.036,17.032,17.036h80.339l-0.427-227.926c-44.224,0-88.01,2.425-108.04,5.003
           C128.937,129.248,147.908,68.051,233.224,68.051z"/>
       <path style="fill:#E9CA92;" d="M127.669,159.343c0,2.739-1.283,4.954-2.87,4.954h-10.29c-1.587,0-2.866-2.215-2.866-4.954v-8.464
           c0-2.731,1.28-4.954,2.866-4.954h10.29c1.587,0,2.87,2.223,2.87,4.954V159.343z"/>
   </g>
   <g>
       <path style="fill:#F5D8A4;" d="M355.16,159.343c0,2.739-1.283,4.954-2.87,4.954h-10.29c-1.583,0-2.87-2.215-2.87-4.954v-8.464
           c0-2.731,1.287-4.954,2.87-4.954h10.29c1.587,0,2.87,2.223,2.87,4.954V159.343z"/>
       <path style="fill:#EDC92C;" d="M131.976,152.959c0,0,34.697,91.77,74.323,32.314c0,0,14.945-18.088,30.649,0.864
           c15.704,18.956,11.977,41.979,14.956,53.417c2.241,8.625,20.598,28.056,26.544-10.342c7.472-48.25,22.802-44.366,31.027-38.772
           c8.221,5.601,18.249,2.26,21.68-13.785c3.431-16.06,4.397-23.813,4.397-23.813S228.423,143.474,131.976,152.959z"/>
       <path style="fill:#DBB626;" d="M131.976,152.959c0,0,34.697,91.77,74.323,32.314c0,0,12.61-15.266,26.828-3.064l0.636-33.564
           C205.628,148.806,161.595,150.041,131.976,152.959z"/>
   </g></svg>
   <div class="text">
       fill color   </div>
       </div>
    </div>
    <div class="svg-wrapper">
        <svg id = "paint-board"style="width: 1200px;height:800px;">
       
        </svg>
    </div>
</div>

<!-- 201,224,247 -->
</body>
<script>
    var fill = false
    
    var beingPressed
    var foreSquare = document.querySelector(".foregroudColor .square")
    var backSquare = document.querySelector(".backgroudColor .square")
    var foreButton = document.querySelector(".foregroudColor")
    var backButton = document.querySelector(".backgroudColor")
    var currentBC = "rgb(118, 163, 112)"
    var currentFC = "rgb(81, 142, 212)"
    var twoButtons =  document.querySelectorAll(".main-menu .selectColor .selectButton [class$=Color]")
    var ColorSpans = document.querySelectorAll(".colorsWrapper span")
    var shapeButtons = document.querySelectorAll(".drawShapes div")
    var palette = document.querySelector("#svg-icon")
    var circle = document.querySelector("svg.circle")
    var rect = document.querySelector("svg.rect")
    var line = document.querySelector("svg.line")
    var bucket = document.querySelector("svg#bucket")
    var colorSelector = document.querySelector("#colorSelector")


    for(let span of ColorSpans){
        span.addEventListener('click',function(){
            clickColorSpan_Input(span)
    })
    }
    for(let  button of twoButtons){
        
        button.addEventListener('click',function(){
        clickColorButton(button)
    })
    }
    for (let  shapeButton of shapeButtons){
        shapeButton.addEventListener('click',function(){
        clickShapeButton(shapeButton)
    })
    }
    colorSelector.addEventListener("change",function(){
        clickColorSpan_Input(colorSelector)   
    })
    function clickColorSpan_Input(node){
        console.log(node.value)
       var color
       palette = beingPressed.querySelector("#svg-icon")
        var circle = palette.querySelector('circle')
        var path = palette.querySelector('path')
        if(node.localName=="span"){
            color = node.style.backgroundColor
        }else{
            color = node.value
        }
        if(beingPressed==foreButton){
            currentFC = color
            changeShapeColor()
        }else{
            currentBC = color
            fillBucket()
        }
        circle.style.fill = color
        path.style.fill = color
    }
    function clickColorButton(b){
        console.log('yes',b)
        beingPressed = b 
        b.style.backgroundColor = "rgb(201,224,247)"
        b.style.outline = "solid lightblue 1px"
        for(var button of twoButtons){
        if(button!=b){
            console.log('no',button)
            button.style.backgroundColor = ""
            
            button.style.outline = ""
        }
    }
    }
    function clickShapeButton(shapeButton){
        shape = shapeButton.className
        shapeButton.style.backgroundColor="rgb(201,224,247)"
        for(var button of shapeButtons){
        if(button!=shapeButton){
            console.log('no',button)
            button.style.backgroundColor = ""
            
           
        }
        console.log(shape)
    }}
    var svg = document.querySelector('#paint-board')
    var node
    var shape = "rectangle"
    var startPos

    function mousePos(node) {
        var rect = node.getBoundingClientRect()
        var pos = {
            x: event.clientX - rect.x,
            y: event.clientY - rect.y,
        }
        return pos
    }
    svg.addEventListener("mousedown",downDraw)
    function downDraw(event) {
        console.log('downdraw')
        
        startPos = mousePos(svg)
        if (shape == 'line') {
            node = svgElt("path", {
                d: `
            M ${startPos.x} ${startPos.y} L ${startPos.x} ${startPos.y}
        
            `,
                stroke: `${currentFC}`,
                fill: 'none',
                'stroke-width': 10,
                'stroke-linecap': 'round',

            })
        } else if (shape == "rectangle") {
            node = svgElt("rect", {
                x: startPos.x,
                y: startPos.y,
                width: 0,
                height: 0,
                stroke: `${currentFC}`,
                fill: 'none',
                'stroke-width': 10,
                'stroke-linecap': 'round',

            })
        } else if (shape == "circle") {
            console.log(currentFC)
            node = svgElt('ellipse', {
                cx: 0,
                cy: 0,
                rx: 0,
                ry: 0,
                stroke: `${currentFC}`,
                fill: 'none',
                'stroke-width': 10,
                'stroke-linecap': 'round',
            })
        }
        svg.appendChild(node)
        svg.addEventListener("mousemove", moveDraw)
    }



    function moveDraw(event) {
        if (!buttonPressed(event)) {
            removeEventListener("mousemove", moveDraw)

        } else {
            var currentPos = mousePos(svg)
            if (shape == "line") {

                var d = node.getAttribute('d')
                d += ` L ${currentPos.x} ${currentPos.y}`
                node.setAttribute('d', d)
            } else if (shape == "rectangle") {
                var w = currentPos.x - startPos.x
                var h = currentPos.y - startPos.y
                if (w > 0) {
                    if (h > 0) {

                    } else {

                        node.setAttribute("y", `${startPos.y + h}`)
                        h = -h
                    }

                } else {
                    if (h > 0) {
                        node.setAttribute("x", `${startPos.x+w}`)
                        w = -w
                    } else {
                        node.setAttribute("x", `${currentPos.x}`)
                        node.setAttribute("y", `${currentPos.y}`)
                        w = -w
                        h = -h
                    }

                }
                node.setAttribute('width', w)
                node.setAttribute('height', h)

            } else if (shape == "circle") {
                centerX = (startPos.x + currentPos.x) / 2
                centerY = (startPos.y + currentPos.y) / 2
                radiusX = (currentPos.x - startPos.x) / 2
                radiusY = (currentPos.y - startPos.y) / 2
                if (radiusX > 0) {
                    if (radiusY > 0) {
                        node.setAttribute('rx', radiusX)
                        node.setAttribute('ry', radiusY)
                    } else if (radiusY < 0) {
                        node.setAttribute('rx', radiusX)
                        node.setAttribute('ry', -radiusY)
                    }

                } else {
                    if (radiusY > 0) {
                        node.setAttribute('rx', -radiusX)
                        node.setAttribute('ry', radiusY)
                    } else if (radiusY < 0) {
                        node.setAttribute('rx', -radiusX)
                        node.setAttribute('ry', -radiusY)
                    }

                }
                node.setAttribute('cx', centerX)
                node.setAttribute('cy', centerY)
            }


        }


    }

    function svgElt(tagName, attrs, ...children) {
        var svgN = document.createElementNS("http://www.w3.org/2000/svg", tagName)
        for (var key in attrs) {
            svgN.setAttribute(key, attrs[key])
        }
        for (var child of children) {
            if (typeof child == "string") {
                child = document.createTextNode(child)
            }
            svgN.appendChild(child)
        }

        return svgN
    }

    function buttonPressed(event) {
        if (event.buttons == null) {
            return event.which !== 0
        } else {
            return event.buttons !== 0
        }
    }
    
    foreButton.click()
    changeShapeColor()
    fillBucket
    function changeShapeColor(){
        var c = circle.querySelector("circle")
        c.setAttribute("stroke",`${currentFC}`)
        var rP = rect.querySelector("path")
        var lP = line.querySelector("path")
        rP.setAttribute("stroke",`${currentFC}`)
        lP.setAttribute("stroke",`${currentFC}`)
    }
    function fillBucket(){
        console.log("fill bucket")
        var bC = bucket.querySelector("circle")
        bC.setAttribute("fill",`${currentBC}`)
    }
    fillBucket()
</script>

</html>